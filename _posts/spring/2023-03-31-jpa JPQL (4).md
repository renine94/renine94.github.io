---
layout: single

header:
  teaser: /assets/images/logo/spring.png
  overlay_image: /assets/images/logo/spring.png
  overlay_filter: linear-gradient(rgba(255, 0, 0, 0.5), rgba(0, 255, 255, 0.5))
  caption: "Photo credit: [**Unsplash**](https://unsplash.com)"
  actions:
    - label: "Github"
      url: "https://github.com/renine94"

title: "[spring] ìŠ¤í”„ë§ JPA ê°ì²´ì§€í–¥ ì¿¼ë¦¬ì–¸ì–´ JPQL - í˜ì´ì§• & ì¡°ì¸"
excerpt: "ğŸš€ spring, JPA, JPQL, paging, join, í˜ì´ì§•. ì¡°ì¸"

categories: spring
tag: [spring, model, jpa, jpql]

toc: true
toc_label: "ğŸ“• ëª©ì°¨"
toc_icon: "null"
toc_sticky: true

sidebar:
  nav: "docs"


---

# ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´4 - Paging, Join

- ì†Œê°œ
- ê¸°ë³¸ ë¬¸ë²•ê³¼ ì¿¼ë¦¬API
- í”„ë¡œì ì…˜(SELECT)
- **í˜ì´ì§•**
- **ì¡°ì¸**
- ì„œë¸Œ ì¿¼ë¦¬
- JPQL íƒ€ì… í‘œí˜„ê³¼ ê¸°íƒ€ì‹
- ì¡°ê±´ì‹ (CASE ë“±ë“±)
- JPQL í•¨ìˆ˜

<br><br>

## 01. í˜ì´ì§• API

- JPAëŠ” í˜ì´ì§•ì„ ë‹¤ìŒ ë‘ APIë¡œ ì¶”ìƒí™”
- `setFirstResult(int startPosition)` : ì¡°íšŒ ì‹œì‘ ìœ„ì¹˜ (0ë¶€í„° ì‹œì‘)
- `setMaxResults(int maxResult)` : ì¡°íšŒí•  ë°ì´í„° ìˆ˜

**ì˜ˆì‹œ**

```java
// paging query
String jpql = 'select m from Member m order by m.name desc';
List<Member> resultList = em.createQuery(jpql, Member.class)
  .setFirstResult(10)
  .setMaxResults(20)
  .getResultList();

```

<br><br>

## 02. ì¡°ì¸

- ë‚´ë¶€ì¡°ì¸
  - `SELECT m FROM Member m [INNER] JOIN m.team t`
- ì™¸ë¶€ì¡°ì¸
  - `SELECT m FROM Member m LEFT [OUTER] JOIN m.team t`
- ì„¸íƒ€ì¡°ì¸
  - `SELECT count(m) from Member m, Team t where m.username = t.name`



## 03. ì¡°ì¸ - ON ì ˆ

- ON ì ˆì„ í™œìš©í•œ ì¡°ì¸ (JPA 2.1ë¶€í„° ì§€ì›)
  - ì¡°ì¸ ëŒ€ìƒ í•„í„°ë§
  - ì—°ê´€ê´€ê³„ ì—†ëŠ” ì—”í‹°í‹° ì™¸ë¶€ ì¡°ì¸ (Hibernate 5.1ë¶€í„°)



### 3-1 ì¡°ì¸ ëŒ€ìƒ í•„í„°ë§

- íšŒì›ê³¼ íŒ€ì„ ì¡°ì¸í•˜ë©´ì„œ, íŒ€ ì´ë¦„ì´ Aì¸ íŒ€ë§Œ ì¡°ì¸

- JPQL

  - `SELECT m, t FROM Member m LEFT JOIN m.team t on t.name = 'A'`

- SQL

  - ```sql
    SELECT m.*, t.*
    FROM Member m
    	LEFT JOIN Team t ON m.TEAM_ID=t.id and t.name='A';
    ```

<br>

<br>

### 3-2 ì—°ê´€ê´€ê³„ ì—†ëŠ” ì—”í‹°í‹° ì™¸ë¶€ ì¡°ì¸

- íšŒì›ì˜ ì´ë¦„ê³¼ íŒ€ì˜ ì´ë¦„ì´ ê°™ì€ ëŒ€ìƒ ì™¸ë¶€ ì¡°ì¸

- JPQL

  - `SELECT m, t FROM Member m LEFT JOIN Team t on m.username = t.name`

- SQL

  - ```sql
    SELECT m.*, t.*
    FROM Member m 
    	LEFT JOIN Team t ON m.username = t.name;
    ```

























