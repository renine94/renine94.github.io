---
layout: single

header:
  teaser: /assets/images/logo/spring.png
  overlay_image: /assets/images/logo/spring.png
  overlay_filter: linear-gradient(rgba(255, 0, 0, 0.5), rgba(0, 255, 255, 0.5))
  caption: "Photo credit: [**Unsplash**](https://unsplash.com)"
  actions:
    - label: "Github"
      url: "https://github.com/renine94"

title: "[spring] ìŠ¤í”„ë§ JPA ê°ì²´ì§€í–¥ ì¿¼ë¦¬ì–¸ì–´ JPQL - JPQL"
excerpt: "ğŸš€ spring, JPA, JPQL, Java Persistence Query Language, ê°ì²´ì§€í–¥ ì¿¼ë¦¬ì–¸ì–´"

categories: spring
tag: [spring, model, jpa, jpql]

toc: true
toc_label: "ğŸ“• ëª©ì°¨"
toc_icon: "null"
toc_sticky: true

sidebar:
  nav: "docs"


---

# ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´2 - JPQL





## 01. JPQL

> Java Persistence Query Language

- JPQLì€ ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ì´ë‹¤. ë”°ë¼ì„œ í…Œì´ë¸”ì„ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ **ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬**í•œë‹¤.
- JPQLì€ SQLì„ ì¶”ìƒí™”í•´ì„œ íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ SQLì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
- JPQLì€ ê²°êµ­ SQLë¡œ ë³€í™˜ëœë‹¤.



## 02. JPQL ë¬¸ë²•

- `select m from Member as m where m.age > 18`
- ì—”í‹°í‹°ì™€ ì†ì„±ì€ ëŒ€ì†Œë¬¸ì êµ¬ë¶„O (Member, age)
- JPQL í‚¤ì›Œë“œëŠ” ëŒ€ì†Œë¬¸ì êµ¬ë¶„X (SELECT, FROM, where)
- ì—”í‹°í‹° ì´ë¦„ ì‚¬ìš©, í…Œì´ë¸” ì´ë¦„ ì•„ë‹˜ (Member)
- **ë³„ì¹­ì€ í•„ìˆ˜ (m)** (asëŠ” ìƒëµ ê°€ëŠ¥)



## 03. ë¦¬í„´ íƒ€ì…

```java
TypedQuery<Member> query1 = em.createQuery("select m from Member m", Member.class);
TypedQuery<String> query2 = em.createQuery("select m.username from Member m", String.class);
Query query3 = em.createQuery("select m.username m.age from Member m");  // íƒ€ì…ëª…ì‹œ X

```



## 04. ê²°ê³¼ ì¡°íšŒ API

- `query.getResultList()` : **ê²°ê³¼ê°€ í•˜ë‚˜ ì´ìƒì¼ ë•Œ**, ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
  - ê²°ê³¼ê°€ ì—†ìœ¼ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
- `query.getSingleResult()` : **ê²°ê³¼ê°€ ì •í™•íˆ í•˜ë‚˜**, ë‹¨ì¼ ê°ì²´ ë°˜í™˜
  - ê²°ê³¼ê°€ ì—†ìœ¼ë©´ : `javax.persistence.NoResultException`
  - ë‘˜ ì´ìƒì´ë©´ : `javax.persistence.NonUniqueResultException`



> Djangoì—ì„œ `User.objects.filter(), User.objects.get()` ì´ë‘ ë¹„ìŠ·í•œ ëŠë‚Œì¸ë°?



## 05. íŒŒë¼ë¯¸í„° ë°”ì¸ë”©

> Where ì¡°ê±´ì ˆì— ë™ì ìœ¼ë¡œ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©

```java
TypedQuery<Member> query = em.createQuery("select m from Member m where m.username = :username", Member.class);

query.setParameter("username", "member1");
Member singleResult = query.getSingleResult();


// ë©”ì„œë“œ ì²´ì´ë‹
Member result = em.createQuery("select m from Member m where m.username = :username", Member.class)
  .setParameter("username", "member1")
  .getSingleResult();


```













