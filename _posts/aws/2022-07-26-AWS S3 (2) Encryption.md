---
layout: single

header:
  teaser: /assets/images/logo/aws.png
  overlay_image: /assets/images/logo/aws.png
  overlay_filter: linear-gradient(rgba(255, 0, 0, 0.5), rgba(0, 255, 255, 0.5))
  caption: "Photo credit: [**Unsplash**](https://unsplash.com)"
  actions:
    - label: "Github"
      url: "https://github.com/renine94"

title: "[aws] S3 (2) - Encryption"
excerpt: "π€ S3 Encryption"

categories: aws
tag: [aws, s3, objects, encryption]

toc: true
toc_label: "π“• λ©μ°¨"
toc_icon: "null"
toc_sticky: true

sidebar:
  nav: "docs"



---

# S3 Encryption for Objects

S3 μ—μ„ Objects λ¥Ό μ•”νΈν™”ν•λ” λ°©λ²•μ—λ” 4κ°€μ§€κ°€ μλ‹¤.

- **SSE-S3** : AWSκ°€ μ²λ¦¬ λ° κ΄€λ¦¬ν•λ” keyλ¥Ό μ‚¬μ©ν•΄ S3 κ°μ²΄λ¥Ό μ•”νΈν™”ν•λ” λ°©λ²•
- **SSE-KMS** : AWS ν‚¤κ΄€λ¦¬ μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•΄μ„ μ•”νΈν™” ν‚¤λ¥Ό κ΄€λ¦¬ν•λ” λ°©λ²•
- **SSE-C** : μ‚¬μ©μκ°€ λ§λ“  μ•”νΈν™” ν‚¤λ¥Ό κ΄€λ¦¬ν•  λ• μ“°μ΄λ” λ°©μ‹
- **Client Side Encryption** : ν΄λΌμ΄μ–ΈνΈμΈ΅ μ•”νΈν™”



μ–΄λ μƒν™©μ— μ–΄λ μ•”νΈν™” λ°©λ²•μ„ μ‚¬μ©ν•΄μ•Ό ν•λ”μ§€ μ‚΄ν΄λ³΄μ



## S3 μ•”νΈν™”1 (SSE-S3)

![image-20220726014949590](../../assets/images/posts/2022-07-26-AWS S3 (2) Encryption/image-20220726014949590.png)

- μ΄ μ•”νΈν™” λ°©λ²•μ€ Amazon S3 μ—μ„ μ²λ¦¬ν•κ³  κ΄€λ¦¬ν•λ” ν‚¤λ¥Ό μ•”νΈν™”μ— μ‚¬μ©ν•λ” λ°©μ‹
- κ°μ²΄λ” μ„λ²„μΈ΅μ—μ„ μ•”νΈν™” λλ‹¤.
- SSE κ°€ μ„λ²„ μΈ΅ μ•”νΈν™”λ¥Ό λ»ν•λ‹¤.
- μ•”νΈν™” μ ν•μ€ AES-256 μ•κ³ λ¦¬μ¦
- κ°μ²΄λ¥Ό μ—…λ΅λ“ν•κ³ , SSE-S3 μ•”νΈν™”λ¥Ό μ„¤μ •ν•λ ¤λ©΄ `"x-amz-server-side-encryption": "AES256"` <br>μΌλ΅ ν—¤λ”λ¥Ό μ„¤μ •ν•΄μ•Ό ν•λ‹¤.
- S3 μ—μ„ λ°μ΄ν„° ν‚¤λ¥Ό μ „λ¶€ μ†μ  λ° κ΄€λ¦¬ν•κ³  μκ² λλ‹¤.





## S3 μ•”νΈν™”2 (SSE-KMS)

![image-20220726015045444](../../assets/images/posts/2022-07-26-AWS S3 (2) Encryption/image-20220726015045444.png)

- KMS λ” ν‚¤ κ΄€λ¦¬ μ„λΉ„μ¤λ¥Ό μλ―Έν•λ©°, μ•”νΈν™” μ„λΉ„μ¤λ“¤ μ¤‘ ν•λ‚
- SSE-KMS μ—μ„ μ•”νΈν™” ν‚¤λ” KMS μ„λΉ„μ¤μ—μ„ μ²λ¦¬ λ° κ΄€λ¦¬ ν•λ‹¤.
- SSE-S3 λ€μ‹  μ΄ λ°©λ²•μ„ νƒν•λ” μ΄μ 
  - λ„κ°€ μ–΄λ–¤ ν‚¤μ— μ ‘κ·Όν•  μ μλ”μ§€ μ μ–΄ κ°€λ¥
  - κ°μ‚¬ μ¶”μ μ„ ν•  μ μλ‹¤
- κ°κ° κ°μ²΄λ” μ„λ²„μΈ΅μ—μ„ μ•”νΈν™”λλ‹¤.
- ν—¤λ”μ„¤μ •ν• λ• `"x-amz-server-side-encryption": "aws:kms"` λΌκ³  μ„¤μ • ν•„μ”
- μ„λ²„ μΈ΅ μ•”νΈν™”μ΄λ―€λ΅ μ›λ¦¬λ” μ΄μ „κ³Ό λ™μΌ
- KMS κ³ κ° λ§μ¤ν„° ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ μ•”νΈν™”λ¥Ό μ§„ν–‰ν•μ—¬ S3 λ²„ν‚·μ— μ €μ¥λλ‹¤.



## S3 μ•”νΈν™”3 (SSE-C)

![image-20220726015554440](../../assets/images/posts/2022-07-26-AWS S3 (2) Encryption/image-20220726015554440.png)

- μ„λ²„ μΈ΅ μ•”νΈν™” λ°©μ‹
- AWSκ°€ μ™Έλ¶€μ—μ„ κ³ κ°μ΄ κ΄€λ¦¬ν•λ” ν‚¤λ¥Ό μ‚¬μ©
- S3 λ” κ³ κ°μ΄ μ κ³µν• μ•”νΈν™” ν‚¤λ¥Ό μ €μ¥ν•μ§€ μ•λ”λ‹¤.
- μ•”νΈν™”λ¥Ό μ„ν•΄μ„λ” λ‹Ήμ—°ν ν‚¤λ¥Ό μ‚¬μ©ν•κ² μ§€λ§ κ·Έ ν›„μ—λ” ν‚¤λ¥Ό νκΈ°ν•λ‹¤.
- λ°μ΄ν„°λ¥Ό AWSλ΅ μ „μ†΅ν• λ•λ” HTTPS μ‚¬μ©ν•΄μ•Ό ν•λ©°, AWSλ΅ μ•”νΈλ¥Ό μ „λ‹¬ν•  ν…λ‹ μ „μ†΅λλ”λ™μ• μ•”νΈν™” ν•„μ”
- μ•”νΈν™” ν‚¤κ°€ HTTP Headerμ— μ κ³µλμ–΄μ•Ό ν•λ‹¤.
  - λ¨λ“  HTTP μ”μ²­λ§λ‹¤ λ§¤λ² μ κ³µλμ–΄μ•Ό ν•¨
  - ν•­μƒ μ‚¬μ©ν›„, νκΈ° λκΈ° λ•λ¬Έ



- λ§μ•½, SSE-Cλ¥Όν†µν•΄ Amazon S3 λ΅λ¶€ν„° νμΌμ„ λ‹¤μ‹ λ‹¤μ΄λ°›μΌλ ¤κ³  ν•λ©΄,
  - μ‚¬μ©λ κ²ƒκ³Ό λ™μΌν• ν΄λΌμ΄μ–ΈνΈ μΈ΅ λ°μ΄ν„° ν‚¤λ¥Ό μ κ³µλ°›μ•„μ•Ό ν•λ‹¤.
  - ν΄λΌμ΄μ–ΈνΈκ°€ ν‚¤λ¥Ό μ κ³µ λ° κ΄€λ¦¬ν•κΈ° λ•λ¬Έμ΄λ‹¤.
  - AWS λ” μ‚¬μ©μκ°€ μ–΄λ–¤ λ°μ΄ν„° ν‚¤λ¥Ό μ‚¬μ©ν–λ”μ§€ μ• μ μ—†κΈ° λ•λ¬Έ



## S3 μ•”νΈν™”4 (Client Side Encryption)

![image-20220726015756299](../../assets/images/posts/2022-07-26-AWS S3 (2) Encryption/image-20220726015756299.png)

- μ΄ λ°©λ²•μ€, κ°μ²΄λ¥Ό μ—…λ΅λ“ν•κΈ° μ „, ν΄λΌμ΄μ–ΈνΈ μ¦‰, μ°λ¦¬κ°€ κ°μ²΄λ¥Ό μ•”νΈν™” ν•λ” κ²ƒ
- ν΄λΌμ΄μ–ΈνΈ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.
  - Amazon S3 Encryption Client λ“±μΌλ΅ ν΄λΌμ΄μ–ΈνΈ μΈ΅ μ•”νΈν™”λ¥Ό μν–‰ν•  μ μλ‹¤.
- ν΄λΌμ΄μ–ΈνΈλ” λ°μ΄ν„°λ¥Ό S3 λ΅ λ³΄λ‚΄κΈ° μ „μ— μ•”νΈν™” ν•΄μ•Ό ν•λ‹¤.
- μ „λ‹¬λ°›μ€ λ°μ΄ν„°κ°€ CSE λ¥Ό μ‚¬μ©ν•΄ μ•”νΈν™” λμ—λ‹¤λ©°λ, λ°μ΄ν„°λ¥Ό λ³µνΈν™”ν•  μ±…μ„λ„ μ‚¬μ©μμ—κ² λ‹¬λ ¤μκ² λλ‹¤.
  - λ”°λΌμ„ μ¬λ°”λ¥Έ ν‚¤κ°€ μ¤€λΉ„λμ–΄ μμ–΄μ•Ό ν•λ‹¤. (ν‚¤ λ¶„μ‹¤ν•λ©΄ μ•λ¨)





# Encryption in transit (SSL/TLS)

> ν†µμ‹  μ¤‘ μ•”νΈν™”
>
> SSL/TLS μ—°κ²°μ΄ μ—¬κΈ°μ— ν•΄λ‹Ήν•λ‹¤.

![image-20220726020045233](../../assets/images/posts/2022-07-26-AWS S3 (2) Encryption/image-20220726020045233.png)

- HTTP
  - μ•”νΈν™” λμ§€ μ•μ€ μ—”λ“ν¬μΈνΈ λ…Έμ¶
- HTTPS
  - μ•”νΈν™”λ μ—”λ“ν¬μΈνΈ λ…Έμ¶ν•μ—¬ μ „μ†΅ μ¤‘ μ•”νΈν™” μ„λΉ„μ¤λ¥Ό μ κ³µ
  - μ΄ λ•, SSL/TLS μΈμ¦μ„μ λ„μ›€μ„ λ°›κ² λλ‹¤.



- μ›ν•λ” μ—”λ“ν¬μΈνΈλ¥Ό μ‚¬μ©ν•΄λ„ λ¬΄λ°©ν•μ§€λ§, HTTPS λ¥Ό μ¶”μ²ν•κ³  λ§μ΄ μ‚¬μ©λλ‹¤.
- HTTPS λ¥Ό μ‚¬μ©ν•κ² λλ©΄ Client μ™€ S3 μ‚¬μ΄λ¥Ό μ΄λ™ν•λ” λ°μ΄ν„°κ°€ λ¨λ‘ μ•”νΈν™” λλ‹¤.



- SSE-C μ•”νΈν™”λ°©μ‹μ„ μ‚¬μ©ν•λ©΄ HTTPS ν†µμ‹ λ°©μ‹μ΄ ν•„μ(μλ¬΄)μ΄λ‹¤.
- μ „μ†΅ μ¤‘ μ•”νΈν™”λ” SSL/TLS λΌκ³ λ„ λ¶λ¦¬μ΄λ‹¤. (SSL/TLS μΈμ¦μ„λ¥Ό μ‚¬μ©ν•κΈ° λ•λ¬Έ)