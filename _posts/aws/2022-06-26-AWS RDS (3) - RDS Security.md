---
layout: single

header:
  teaser: /assets/images/logo/aws.png
  overlay_image: /assets/images/logo/aws.png
  overlay_filter: linear-gradient(rgba(255, 0, 0, 0.5), rgba(0, 255, 255, 0.5))
  caption: "Photo credit: [**Unsplash**](https://unsplash.com)"
  actions:
    - label: "Github"
      url: "https://github.com/renine94"

title: "[aws] RDS (3) - RDS Security"
excerpt: "π€ RDS, DB, Security, Encryption"

categories: aws
tag: [aws, rds, db, sql, security]

toc: true
toc_label: "π“• λ©μ°¨"
toc_icon: "null"
toc_sticky: true

sidebar:
  nav: "docs"






---

# RDS Security

μ•”νΈν™”μ— λ€ν•΄ μ•μ•„λ³΄μ.
{: .notice--success}



- At rest encryption
  - AWS KMS λ΅ λ§μ¤ν„° DB μ™€ μ½κΈ° DB λ¥Ό μ•”νΈν™” ν•  μ μλ‹¤.
  - μ•”νΈν™” μ‹¤ν–‰μ‹ μ‹¤ν–‰ μ‹κ°„μ„ μ •μν•΄μ•Ό ν•λ‹¤.
  - λ§μ¤ν„° DB λ¥Ό μ•”νΈν™” ν•μ§€ μ•μΌλ©΄, λ³µμ λ³Έλ„ μ•”νΈν™”ν•  μ μ—†λ‹¤.
  - Oracleκ³Ό SQL Serverμ—μ„ TDE (Transparent Data Encryption) λΌκ³ ν•λ” ν¬λ…ν• λ°μ΄ν„° μ•”νΈν™”λ¥Ό ν™μ„±ν™” ν•  μ μμΌλ©°, μ΄λ” λ°μ΄ν„°λ² μ΄μ¤ μ•”νΈν™”μ λ€μ•μ„ μ κ³µν•λ‹¤.
- In-flight encryption
  - SSL λ” λ°μ΄ν„°λ¥Ό μ „μ†΅μ¤‘μ— μ•”νΈν™”λ¥Ό μ‚¬μ©ν•λ‹¤.
  - ν΄λΌμ΄μ–ΈνΈμ—μ„ λ°μ΄ν„°λ² μ΄μ¤λ΅ μ „μ†΅μ¤‘μΈ λ°μ΄ν„°
  - λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²°μ‹ μ‹ λΆ°ν•  μ μλ” μΈμ¦μ„λ΅ SSL μµμ…μ„ μ κ³µν•λ©΄ SSLμ„ μ—°κ²°ν•  μ μλ‹¤.
    - PostgreSQL
      - rds.force_ssl=l (νλΌλ―Έν„° κ·Έλ£Ήμ—μ„ μ„¤μ •ν•΄μ•Όν•¨ RDS Console)
      - λ©”κ²λ³€μ κ·Έλ£Ή (νλΌλ―Έν„° κ·Έλ£Ή) μ—μ„ μ„¤μ •
    - MySQL
      - GRANT USAGE ON *.* TO 'mysqluser'@'%' REQUIRE SSL;
      - λ°μ΄ν„°λ² μ΄μ¤ λ‚΄μ—μ„ SQL λ…λ Ήλ¬Έμ„ μ‹¤ν–‰



## Encryption Operations

- RDS λ°±μ—…μ„ μ•”νΈν™” ν•λ” λ°©λ²•
  - μ•”νΈν™”λμ§€ μ•μ€ RDS DB μ—μ„ μ¤λƒ…μƒ·μ„ μƒμ„±ν•λ©΄, μ¤λƒ…μƒ· μμ²΄λ” μ•”νΈν™”X
  - μ•”νΈν™”λ RDS DB dγ…”μ„ μ¤λƒ…μƒ·μ„ μƒμ„±ν•λ©΄, μ¤λƒ…μƒ· μμ²΄λ” μ•”νΈν™”O (κΈ°λ³Έκ°’μ€ μ•„λ‹λ‹¤)
  - μ•”νΈν™”λμ§€ μ•μ€ μ¤λƒ…μƒ·μ„ μ•”νΈν™”λ μ¤λƒ…μƒ·μΌλ΅ λ³µμ ν•΄μ•Ό ν•λ‹¤.
- μ•”νΈν™”λμ§€ μ•μ€ RDS DBλ¥Ό μ•”νΈν™” ν•λ” λ°©λ²•
  - μ•”νΈν™”λμ§€ μ•μ€ DB μ μ¤λƒ…μƒ·μ„ μƒμ„±ν•μ—¬ λ³µμ ν•λ‹¤.
  - λ³µμ ν• μ¤λƒ…μƒ·μ μ•”νΈν™”λ¥Ό ν™μ„±ν™” ν•λ‹¤.
  - μ΄ μ•”νΈν™”λ μ¤λƒ…μƒ·μΌλ΅ λ°μ΄ν„°λ² μ΄μ¤λ¥Ό λ³µμ›ν•  μ μλ‹¤.
    - μ΄λ” μ•”νΈν™”λ RDS DB λ¥Ό μ κ³µν•λ‹¤.
  - μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ μ΄μ „ DB μ—μ„ μ•”νΈν™”λ DB λ΅ μ®κΈ΄λ‹¤.
  - μ΄μ „ DB λ” μ‚­μ ν•λ‹¤.



## Network & IAM

- Network Security
  - RDS λ” λ€λ¶€λ¶„ private subnet μ—μ„ λ°°ν¬λλ‹¤.
  - λ”°λΌμ„ λ°μ΄ν„°λ² μ΄μ¤κ°€ wwwμ— λ…Έμ¶λμ§€ μ•λ„λ΅ ν•΄μ•Όν•λ‹¤.
  - RDS λ³΄μ•μ€ RDS μΈμ¤ν„΄μ¤μ— μ—°κ²°λμ–΄ μλ” λ³΄μ• κ·Έλ£Ήμ„ ν™μ©ν•΄ μ‹¤ν–‰λλ‹¤.
    - EC2 μΈμ¤ν„΄μ¤μ™€ λ™μΌν• κ°λ…
    - RDS μ™€ ν†µμ‹ ν•  μ μλ” IP λλ” λ³΄μ• κ·Έλ£Ήμ„ μ μ–΄ν•λ‹¤.



- Access Management
  - μ‚¬μ©μ κ΄€λ¦¬ λ“±κ³Ό κ¶ν•μΈ μ•΅μ„Έμ¤ κ΄€λ¦¬
  - AWS RDS λ¥Ό κ΄€λ¦¬ν•λ” μ‚¬λλ§ μ μ–΄ν•  μ μλ‹¤.
  - DB λ¥Ό μƒμ„±ν•κ³  μ‚­μ ν•  μ μμΌλ©° μ½κΈ° μ „μ© λ³µμ λ³Έ μƒμ„±λ“±μ„ ν•  μ μλ‹¤.
  - κΈ°μ΅΄λ°©μ‹μΌλ΅ DBμ— λ΅κ·ΈμΈν•κΈ°μ„ν•΄ κΈ°μ΅΄ μ‚¬μ©μμ΄λ¦„κ³Ό μ•”νΈν™”λ¥Ό μ‚¬μ©ν•κ±°λ‚,<br>MySQL, PostgreSQL κ³Ό κ°™μ€ IAM κΈ°λ°μ μΈμ¦μ„ μ‚¬μ©ν•  μ μλ‹¤.
  - κ²°κµ­ DBλ³΄μ•μ€ μ£Όλ΅ DBμ•μ—μ„ μ΄λ£¨μ–΄μ§„λ‹¤.



## RDS - IAM Authentication

![image-20220626210434161](../../assets/images/posts/2022-06-26-AWS RDS (3) - RDS Security/image-20220626210434161.png)

- IAM DB μΈμ¦μ€ MySQL, PostgreSQL μ—μ„λ§ μ‚¬μ©κ°€λ¥
- λΉ„λ°€λ²νΈκ°€ ν•„μ”μ—†μΌλ©°, IAM RDS API λ¥Ό νΈμ¶ν•μ—¬ μΈμ¦ν† ν°μ„ μ–»κΈ°λ§ ν•λ©΄ λλ‹¤.
- μΈμ¦ ν† ν°μ€ 15λ¶„κ°„ μ ν¨ν•λ‹¤.
- μ΄μ 
  - λ„¤νΈμ›ν¬ μ…μ¶λ ¥μ€ SSL λ΅ μ•”νΈν™” λλ‹¤.
  - IAM μ€ DB λ‚΄λ¶€μ— μ‚¬μ©μ κ΄€λ¦¬ λ€μ‹  μ¤‘μ•™μ—μ„μ μ‚¬μ©μ κ΄€λ¦¬μ— μ‚¬μ©λλ‹¤.
  - μ¤‘μ•™ μ§‘μ¤‘ν™”λ μΈμ¦ μ ν•μ΄λ‹¤.
  - IAM μ—­ν• κ³Ό EC2 μΈμ¤ν„΄μ¤ ν”„λ΅νμΌλ΅ μ‰½κ² ν†µν•©ν•  μ μλ‹¤.



## RDS Security - μ •λ¦¬

- λ―Έμ‚¬μ© λ°μ΄ν„° μ•”νΈν™”
  - DB μΈμ¤ν„΄μ¤λ¥Ό μ²μ μƒμ„±ν•  λ•λ§ μ‹¤ν–‰λλ‹¤.
  - λλ” μ•”νΈν™”X DB => Snapshot => copy Snapshot as encrypted => create DB from snapshot
- λ‚μ μ±…μ„
  - DB μ λ³΄μ•κ·Έλ£Ήμ—μ„ port, IP, μΈλ°”μ΄λ“ κ·μΉ™μ„ μ²΄ν¬ν•΄μ•Ό ν•λ‹¤.
  - λ‚΄λ¶€ λ°μ΄ν„°λ² μ΄μ¤μ λ¨λ“  μ‚¬μ©μ μƒμ„± λ° κ¶ν•μ„ κ΄€λ¦¬ν•΄μ•Ό ν•λ‹¤.
  - mySQL, PostgreSQL μ© IAM μΌλ΅ κ΄€λ¦¬ν•΄μ•Ό ν•λ‹¤.
  - λλ” νΌλΈ”λ¦­ μ ‘κ·Όκ¶ν•μ΄ μκ±°λ‚ μ—†λ” DBλ¥Ό μƒμ„±ν•΄ ν”„λΌμ΄λΉ— μ„λΈλ„·μ΄λ‚ νΌλΈ”λ¦­μΌλ΅ μ„¤κ³„λ¥Ό ν•λ‹¤.
  - νλΌλ―Έν„° κ·Έλ£Ήκ³Ό λ°μ΄ν„°λ² μ΄μ¤κ°€ SSLμ—°κ²°λ§ ν—μ©ν•λ„λ΅ κµ¬μ„±ν•΄μ•Ό ν•λ‹¤.
- AWSμ μ±…μ„
  - SSH μ•΅μ„Έμ¤κ°€ λ°μƒν•μ§€ μ•λ„λ΅ ν•κ³ ,
  - DB ν¨μΉλ‚ OS ν¨μΉλ¥Ό ν• ν•„μ”κ°€ μ—†μ–΄μ§„λ‹¤. (AWS μ—μ„ ν•΄μ¤€λ‹¤)